# 基于区块链的链下大规模数据存储研究



## 系统背景

随着区块链上业务运行时间的增加，区块链上数据会呈现出线性增长，区块链账本的块链式存储结构以及分布式全同步机制造成了链上数据的高度冗余，这大大增加了链上数据的容量需求和存储成本；同时，对于关键业务涉及到的非结构化大文件，如音频、视频、图片、文档等也不适合直接存储在区块链上。另一方面，相对于集中式的数据存储而言，多节点、全同步的账本机制使得所有节点都持有一份全量数据，任意节点被攻破都会有数据隐私泄露的可能。为了实现区块链存储扩容以及数据隐私保护，链下大规模存储成为一种可行的解决方案。

## 主要功能

为企业开发一套统一、通用的基于区块链的链下大规模数据存储系统，主要功能包括：用户管理、数据发布、分片存储、默克尔树、元信息上链、以及存储证明机制等功能。

### 用户管理

用户管理维护登录该系统的所有账号，可分为普通用户和管理员用户，普通用户只有登录、数据发布等基础操作权限，管理员拥有系统所有权限，包括数据统计、管理等功能。

### 数据发布

用户可登录本系统，去发布自己需要存储的数据，支持断点续传、秒传、分片上传等功能。

### 分片存储

为了提升链下数据存储的可靠性和高利用率，需设计出一套分片存储技术，具备抗容灾、单点故障等功能，实现链下数据的可靠高效存储。

### 默克尔树

用基于默克尔树的存储结构来存储文件，存储时把文件会先把文件进行分片，然后根据分片的内容生成唯一HASH。

### 元信息上链

元信息包括文件HASH、文件描述信息、发布者的存储节点ID、发布者的区块链地址。发布文件时，存储节点会将文件元信息发布到区块链上，文件元信息在区块链上永久保存、不可篡改，而文件则保留在链下。

### 存储证明机制

虽然基于默克尔树和元信息上链能够实现链上链下数据锚定，但是却无法主动发现数据是否已被篡改，为了能够及时发现各节点网络中存储的文件丢失或者被篡改，需要研究一套存储证明的机制来保障文件的完整性与正确性，当发现文件被破坏或篡改时能够发送预警消息及时通知到数据的提供方。

## 开发环境

服务端操作系统及版本：Linux
开发软件：IntelliJ
区块链平台：hyperchain开源版本

## 基本说明

系交付物：可运行的区块链的链下大规模数据存储系统，前后端代码，sdk（数据存储接入的sdk及使用文档）。
前端技术栈：html、css、js、框架react、vue等。
后端技术栈：Springboot2.X、MybatisPlus、SpringMvc、Swagger、Jwt、Solidity、LiteSdk（hyperchain开源sdk）等（开发语言不限）。
注：
hyperchain github地址：https://github.com/hyperchain
LiteSdk github地址：https://github.com/hyperchain/javasdk
